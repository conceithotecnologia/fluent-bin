/**
   Marca uma posição no semáforo de sistema

	@author    Ricardo Gonçalves
	@date      14/08/2007 14:50:52
	@trigger

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
Create or Replace Function sys_setflag
(  In  in_codtable varchar,
   In  in_recno integer,
   In in_owner varchar,
   Out out_result integer )
As $$
Begin
   -- Obtem a marcação
   if exists(Select 1
     From [(ss080)]
    Where owner_table = in_codtable
      And owner_recno  = in_recno)
   then
      out_result := 1;
      Return;
   End if;

   -- Insere a marcação
   Insert Into [(ss080)] ( owner_table,  owner_recno, owner_ )
        Values           ( in_codtable, in_recno, in_owner );

   out_result := 1;
End;
$$ language plpgsql;