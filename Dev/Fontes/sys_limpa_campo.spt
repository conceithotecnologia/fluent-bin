/**
  Retorna String sem caracteres diversos

   Autor	      Fabio Crepaldi Carvalho
   Data        08/12/2011 11:00

   Parâmetro

	Histórico
	------------------------------------------------------------------
*/
create or replace function sys_limpa_campo
( in  sCampo character varying,
  in  lSpace boolean,
  out outres character varying)

as $$

declare

Begin
   sCampo := replace(sCampo, '.', '');
   sCampo := replace(sCampo, ',', '');
   sCampo := replace(sCampo, ';', '');
   sCampo := replace(sCampo, ':', '');
   sCampo := replace(sCampo, '(', '');
   sCampo := replace(sCampo, ')', '');
   sCampo := replace(sCampo, '-', '');
   sCampo := replace(sCampo, '/', '');
   sCampo := replace(sCampo, '\', '');
   sCampo := replace(sCampo, '|', '');
   sCampo := replace(sCampo, 'à', 'a');
   sCampo := replace(sCampo, 'á', 'a');
   sCampo := replace(sCampo, 'ã', 'a');
   sCampo := replace(sCampo, 'Á', 'A');
   sCampo := replace(sCampo, 'À', 'A');
   sCampo := replace(sCampo, 'É', 'E');
   sCampo := replace(sCampo, 'é', 'e');  
   sCampo := replace(sCampo, 'ê', 'e');
   sCampo := replace(sCampo, 'í', 'i');
   sCampo := replace(sCampo, 'Í', 'I');
   sCampo := replace(sCampo, 'ó', 'o');
   sCampo := replace(sCampo, 'Ó', 'O');
   sCampo := replace(sCampo, 'õ', 'o');
   sCampo := replace(sCampo, 'õ', 'o');
   sCampo := replace(sCampo, 'Õ', 'O');
   sCampo := replace(sCampo, 'ç', 'c');
   sCampo := replace(sCampo, 'Ë', 'c');   --asc211
   sCampo := replace(sCampo, '-', 'C');   --193
   sCampo := replace(sCampo, '+', 'C');   --192
   
   -- testa se retira espaco em branco
   if lSpace then
      sCampo := replace(sCampo, ' ', '');
   end if;

   outres := sCampo;
End;
$$ language 'plpgsql';